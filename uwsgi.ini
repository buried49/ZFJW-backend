[uwsgi]
# 应用模块和变量
module = wsgi:application
callable = app

# 服务器配置
http = 0.0.0.0:5000
# 如果使用nginx反向代理，可以改为socket
# socket = 127.0.0.1:5000
# socket = /tmp/uwsgi.sock
# chmod-socket = 666

# 进程配置
master = true
processes = 4
threads = 2
max-requests = 1000
max-requests-delta = 100

# 性能优化
enable-threads = true
single-interpreter = true
lazy-apps = true
thunder-lock = true

# 内存管理
memory-report = true
reload-on-rss = 512
limit-as = 1024

# 日志配置
logto = logs/uwsgi.log
log-maxsize = 50000000
log-backupcount = 5
disable-logging = false

# 静态文件（如果有的话）
# static-map = /static=/path/to/static/files

# 安全配置
uid = www-data
gid = www-data
# 在Windows上，忽略uid/gid配置

# 进程管理
pidfile = /tmp/uwsgi.pid
vacuum = true
die-on-term = true

# 开发环境配置（生产环境请移除）
# py-autoreload = 1

# 健康检查
stats = 127.0.0.1:9191
stats-http = true

# 超时配置
harakiri = 60
socket-timeout = 60
http-timeout = 60

# Buffer大小
buffer-size = 32768
post-buffering = 8192
